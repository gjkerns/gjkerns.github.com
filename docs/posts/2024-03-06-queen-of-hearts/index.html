<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="G. Jay Kerns">
<meta name="dcterms.date" content="2024-03-06">
<meta name="description" content="A quick look at an intriguing raffle game.">

<title>Statistics, plain and sample - The Queen of Hearts</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Statistics, plain and sample - The Queen of Hearts">
<meta property="og:description" content="A quick look at an intriguing raffle game.">
<meta property="og:image" content="https://gjkerns.github.io/posts/2024-03-06-queen-of-hearts/preview.jpg">
<meta property="og:site-name" content="Statistics, plain and sample">
<meta name="twitter:title" content="Statistics, plain and sample - The Queen of Hearts">
<meta name="twitter:description" content="A quick look at an intriguing raffle game.">
<meta name="twitter:image" content="https://gjkerns.github.io/posts/2024-03-06-queen-of-hearts/preview.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Statistics, plain and sample</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://gkerns.people.ysu.edu" rel="" target=""><i class="bi bi-person" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/gjkerns" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mathstodon.xyz/(gjkerns?)" rel="" target=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/g-jay-kerns-9ab99111/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">The Queen of Hearts</h1>
                  <div>
        <div class="description">
          A quick look at an intriguing raffle game.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">probability</div>
                <div class="quarto-category">classical</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://gkerns.people.ysu.edu">G. Jay Kerns</a> <a href="https://orcid.org/0000-0001-9354-2842" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 6, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="preview.jpg" title="The Queen of Hearts" class="preview-image img-fluid figure-img"></p>
<figcaption class="figure-caption">The Queen of Hearts. Source: <a href="https://img.favpng.com/4/10/10/queen-of-hearts-playing-card-stock-photography-png-favpng-iXdcRx6K22ngYDUxhZ7DaSYfu.jpg">favpng.com</a></figcaption>
</figure>
</div>
<section id="rules-of-the-game" class="level1">
<h1>Rules of the game</h1>
<p>Local customs vary, but here is a general description: the 52 cards (plus 2 Jokers) of a standard deck of playing cards are well-shuffled and posted face down on a high-visibility surface (such as a wall in the local tavern).</p>
<p>Players buy tickets, as many as they want, for $1 each and fill in their names, phone numbers and the number, 1 to 54, of the card (or joker) they want flipped. Every week, one and only one ticket is drawn and the card—one of 54—is taped to a board with the corresponding number flipped over. If it’s the queen of hearts, the owner of the ticket wins the pot. If not, the money stays in the pot and the process starts all over again the next week [with the remaining unflipped cards].</p>
<p><strong>Source:</strong> <a href="http://businessjournaldaily.com/barry-dyngles-finds-queen-of-hearts-quite-a-draw/">Business Journal Daily</a></p>
</section>
<section id="notation-and-assumptions" class="level1">
<h1>Notation and Assumptions</h1>
<p>Suppose there are <span class="math inline">\(k\)</span> unflipped cards remaining on the board. Write <span class="math inline">\(m = 54 - k\)</span> for the number of weeks that the game has been played without a winner. Suppose you buy <span class="math inline">\(n\)</span> tickets to play the game. Suppose there are <span class="math inline">\(N\)</span> tickets bought by other people also playing the game. Let <span class="math inline">\(J\)</span> denote the current running jackpot carried over from last week (before any new tickets were bought this week).</p>
<p>We assume that the deck of cards was well-shuffled before being placed on the board. We also assume that the pot of tickets was well-mixed before selection of the one potential winning ticket.</p>
<p>Finally, we suppose that nobody has x-ray vision.</p>
</section>
<section id="location-of-the-queen-of-hearts" class="level1">
<h1>Location of the Queen of Hearts</h1>
<p>After <span class="math inline">\(m\)</span> weeks of lost games, the Queen of Hearts is equally likely to be located at any one of the remaining <span class="math inline">\(k\)</span> cards. To see why, let <span class="math inline">\(X\)</span> denote the random location of the Queen of Hearts. When <span class="math inline">\(k = 54\)</span>, then <span class="math inline">\(\Pr(X=x) = 1/54\)</span>, <span class="math inline">\(x = 1,2,\ldots,54\)</span> since the deck was well-shuffled. Suppose in week one the chosen ticket was <span class="math inline">\(x_{1}\)</span>, and suppose that ticket was a loser. Given the information <span class="math inline">\(X \neq x_{1}\)</span>, the conditional distribution of <span class="math inline">\(X\)</span> is <span class="math display">\[
\Pr(X = x,\vert,X\neq x_{1}) = \frac{\Pr(X = x)}{\Pr(X \neq x_{1})} = \frac{1/54}{53/54} = \frac{1}{53},
\]</span></p>
<p>for <span class="math inline">\(x = 1,2,\ldots,54\)</span> and <span class="math inline">\(x \neq x_{1}\)</span>. Continuing in this fashion, <span class="math display">\[
\Pr(X = x,\vert,X\neq x_{1},\ldots,x_{m}) = \frac{\Pr(X = x)}{\Pr(X \neq x_{1},\ldots,x_{m})} = \frac{1/54}{(54 - m)/54} = \frac{1}{k},
\]</span> for <span class="math inline">\(x = 1,2,\ldots,54\)</span> and <span class="math inline">\(x \neq x_{1},\ldots,x_{m}\)</span>.</p>
</section>
<section id="probability-that-somebody-wins-this-week" class="level1">
<h1>Probability that somebody wins this week</h1>
<p>There is a 100% chance that somebody’s ticket will be selected. That ticket will have a number on it, and that number will match the random location of the Queen of Hearts a proportion <span class="math inline">\(1/k\)</span> of the time<span class="math inline">\(\ldots\)</span> no x-ray vision, remember? That means <span class="math display">\[
\Pr(\text{Somebody wins}) = \Pr(\text{Number matches}) = \frac{1}{k}.\
\]</span></p>
</section>
<section id="probability-that-you-win-this-week" class="level1">
<h1>Probability that <em>you</em> win this week</h1>
<p>There are <span class="math inline">\(N + n\)</span> total tickets in the pot, <span class="math inline">\(n\)</span> of which with your name on it. Assuming a well-mixed pot, the probability that one of your tickets is selected is <span class="math display">\[
\Pr(\text{Your ticket selected}) = \frac{n}{N + n}.\
\]</span></p>
<p>Given that your ticket is selected, you have probability <span class="math inline">\(\Pr(\text{Number matches}) = 1/k\)</span> that your number matches. Therefore, the probability that you win is <span class="math display">\[
\Pr(\text{You win}) = \Pr(\text{Your ticket selected} \cap \text{Number matches}) = \frac{n}{k(N + n)}.
\]</span></p>
</section>
<section id="odds-against-your-winning" class="level1">
<h1>Odds against your winning</h1>
<p>If we write <span class="math inline">\(p = \frac{n}{N + n} \cdot \frac{1}{k}\)</span> then <span class="math display">\[
\text{Odds against you} = \frac{1 - p}{p} = \frac{kN + (k - 1)n}{n}.
\]</span></p>
</section>
<section id="probability-that-the-game-lasts-this-long" class="level1">
<h1>Probability that the game lasts this long</h1>
<p>The game ends exactly when somebody wins, and we saw earlier that when there are <span class="math inline">\(k\)</span> cards left, the probability that somebody wins is <span class="math inline">\(1/k\)</span>. Let <span class="math inline">\(L\)</span> denote the length of the game. Then <span class="math inline">\(L\)</span> can be any number <span class="math inline">\(1,2,\ldots,54\)</span>. But <span class="math inline">\(\Pr(L = 1)\)</span> is <span class="math display">\[
\Pr(L = 1) = \Pr( \text{Somebody wins when }k\text{ is 54}) = \frac{1}{54}.
\]</span></p>
<p>Now, in order for <span class="math inline">\(L = 2\)</span> it must be that nobody wins the first week (with probability <span class="math inline">\(53/54\)</span>), and then somebody wins the second week (with probability <span class="math inline">\(1/53\)</span>). Thus <span class="math display">\[
\Pr(L = 2) = \frac{53}{54}\cdot \frac{1}{53} = \frac{1}{54}.
\]</span></p>
<p>By the same reasoning, <span class="math display">\[
\Pr(L = 3) = \frac{53}{54}\cdot \frac{52}{53} \cdot \frac{1}{52} = \frac{1}{54},
\]</span> and so forth. In other words, the outcomes <span class="math inline">\(L = 1,2,3,\ldots,54\)</span> are equally likely.</p>
<p>With the above in mind, we may ask questions like, “What are the chances the game will continue until there are at most 7 cards left?” This is <span class="math display">\[
\Pr(L \geq 48) = \frac{7}{54} \approx 0.1296296,
\]</span> or almost a 13% chance.</p>
</section>
<section id="it-lasted-this-long-how-much-longer" class="level1">
<h1>It lasted this long, how much longer?</h1>
<p>Given that the game has lasted <span class="math inline">\(m\)</span> weeks, the location of the Queen of Hearts is uniformly distributed on the remaining <span class="math inline">\(k\)</span> cards, so the same argument above carries through except now our deck has only <span class="math inline">\(k\)</span> cards in it. For instance, given that there are <span class="math inline">\(k = 7\)</span> cards left, then the probability that the game keeps going until there are at most 2 cards remaining is <span class="math inline">\(2/7 \approx 0.2857143\)</span>.</p>
</section>
<section id="expected-winnings" class="level1">
<h1>Expected winnings</h1>
<p>Suppose you only started playing the game this week. Denote your winnings by <span class="math inline">\(W\)</span>, where we understand that if you lose then your winnings are negative. You spent <span class="math inline">\(n\)</span> dollars on tickets, but you will have <span class="math inline">\(\$(J + N + n)\)</span> if you win. Your expected winnings are <span class="math display">\[
\mathbb{E}(W) = -n \Pr(\text{Lose}) + (J + N + n)\Pr(\text{Win}),
\]</span> and after plugging in the formulas from above we get <span class="math display">\[
\mathbb{E}(W) = -n \left( 1 - \frac{n}{k(N + n)}\right) + (J + N + n)\left( \frac{n}{k(N + n)} \right).
\]</span></p>
</section>
<section id="but-what-if-i-played-earlier-weeks-too" class="level1">
<h1>But what if I played earlier weeks, too?</h1>
<p>Let’s say you bought <span class="math inline">\(n^{\ast}\)</span> tickets prior to this week’s game. Then after your <span class="math inline">\(n\)</span> tickets this week you’ve invested <span class="math inline">\(n + n^{\ast}\)</span> total dollars in the game which you stand to lose. The <span class="math inline">\(n^{\ast}\)</span> is already contained in the <span class="math inline">\(J\)</span> dollars above, because that money carries through from week to week. Your probability of winning this week doesn’t change. Your (smaller) expected winnings are <span class="math display">\[
\mathbb{E}(W) = -(n + n^{\ast}) \left( 1 - \frac{n}{k(N + n)}\right) + (J + N + n)\left( \frac{n}{k(N + n)} \right).
\]</span></p>
</section>
<section id="expected-winnings-per-dollar" class="level1">
<h1>Expected winnings per dollar</h1>
<p>Just divide <span class="math inline">\(\mathbb{E}(W)\)</span> by <span class="math inline">\(n\)</span>, or <span class="math inline">\((n + n^{\ast})\)</span>, whatever your case may be.</p>
</section>
<section id="can-i-try-it-out" class="level1">
<h1>Can I try it out?</h1>
<p>Sure. <a href="https://github.com/gjkerns/queenOfHearts">Here is an RStudio <code>shiny</code> app</a> that calculates (almost) all of the above for assorted values of <span class="math inline">\(k\)</span>, <span class="math inline">\(n\)</span>, <span class="math inline">\(N\)</span>, and <span class="math inline">\(J\)</span>.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">https://creativecommons.org/licenses/by-sa/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{jay kerns2024,
  author = {Jay Kerns, G.},
  title = {The {Queen} of {Hearts}},
  date = {2024-03-06},
  url = {https://gjkerns.github.io/posts/2024-03-06-queen-of-hearts},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-jay kerns2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Jay Kerns, G. 2024. <span>“The Queen of Hearts.”</span> March 6, 2024.
<a href="https://gjkerns.github.io/posts/2024-03-06-queen-of-hearts">https://gjkerns.github.io/posts/2024-03-06-queen-of-hearts</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Copyright 2024, G. Jay Kerns</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>